Setting Up the Analyser
=======================

Requirements
------------

The Chess Analysis application requires the following:

- An installation of Python 3
- A virtual environment with the requirements listed in the "requirements.txt" file installed
- Local copies of the chess engines (see the documentation on engine installation)
- A configured SQLite database (see the documentation on the database)

For movie export, then `ffmpeg <https://ffmpeg.org/>`_ must also be installed.

Creating a Virtual environment
------------------------------

- To create the virtual environment, from the root of the ChessAnalysis working copy:

.. code-block:: console

    ./make_venv.sh

- First, this will deactivate and remove the existing virtual environment, if there is one
- Then, it will create a new virtual environment and install the requirements

Installing Cairo
----------------

- The analyser uses the cairosvg package to convert the SVG image of the board generated by python-chess to PNG format
- The PNG image is then embedded in the analysis reports
- If the following errors, or similar, are seen, they indicate the shared libraries for the Cairo graphics library are missing:

.. code-block:: console

    OSError: no library called "cairo-2" was found
    no library called "cairo" was found
    no library called "libcairo-2" was found
    cannot load library 'libcairo.so.2': dlopen(libcairo.so.2, 2): image not found.  Additionally, ctypes.util.find_library() did not manage to locate a library called 'libcairo.so.2'
    cannot load library 'libcairo.2.dylib': dlopen(libcairo.2.dylib, 2): image not found.  Additionally, ctypes.util.find_library() did not manage to locate a library called 'libcairo.2.dylib'
    cannot load library 'libcairo-2.dll': dlopen(libcairo-2.dll, 2): image not found.  Additionally, ctypes.util.find_library() did not manage to locate a library called 'libcairo-2.dll'


Installation on MacOS
~~~~~~~~~~~~~~~~~~~~~

- Cairo can be installed using Homebrew or MacPorts

Installation on Windows
~~~~~~~~~~~~~~~~~~~~~~~

- The shared libraries can be installed by installing the GTK3 runtime from the following GitHub repository:

https://github.com/tschoonj/GTK-for-Windows-Runtime-Environment-Installer/releases
